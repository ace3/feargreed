"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/fng/aggregate";
exports.ids = ["pages/api/fng/aggregate"];
exports.modules = {

/***/ "next/dist/compiled/next-server/pages-api.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages-api.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/pages-api.runtime.dev.js");

/***/ }),

/***/ "(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Ffng%2Faggregate&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Ffng%2Faggregate.js&middlewareConfigBase64=e30%3D!":
/*!************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Ffng%2Faggregate&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Ffng%2Faggregate.js&middlewareConfigBase64=e30%3D! ***!
  \************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   routeModule: () => (/* binding */ routeModule)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/pages-api/module.compiled */ \"(api)/./node_modules/next/dist/server/future/route-modules/pages-api/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(api)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"(api)/./node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var _pages_api_fng_aggregate_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./pages/api/fng/aggregate.js */ \"(api)/./pages/api/fng/aggregate.js\");\n\n\n\n// Import the userland code.\n\n// Re-export the handler (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_fng_aggregate_js__WEBPACK_IMPORTED_MODULE_3__, \"default\"));\n// Re-export config.\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_fng_aggregate_js__WEBPACK_IMPORTED_MODULE_3__, \"config\");\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__.PagesAPIRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES_API,\n        page: \"/api/fng/aggregate\",\n        pathname: \"/api/fng/aggregate\",\n        // The following aren't used in production.\n        bundlePath: \"\",\n        filename: \"\"\n    },\n    userland: _pages_api_fng_aggregate_js__WEBPACK_IMPORTED_MODULE_3__\n});\n\n//# sourceMappingURL=pages-api.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LXJvdXRlLWxvYWRlci9pbmRleC5qcz9raW5kPVBBR0VTX0FQSSZwYWdlPSUyRmFwaSUyRmZuZyUyRmFnZ3JlZ2F0ZSZwcmVmZXJyZWRSZWdpb249JmFic29sdXRlUGFnZVBhdGg9LiUyRnBhZ2VzJTJGYXBpJTJGZm5nJTJGYWdncmVnYXRlLmpzJm1pZGRsZXdhcmVDb25maWdCYXNlNjQ9ZTMwJTNEISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztBQUFzRztBQUN2QztBQUNMO0FBQzFEO0FBQ3lEO0FBQ3pEO0FBQ0EsaUVBQWUsd0VBQUssQ0FBQyx3REFBUSxZQUFZLEVBQUM7QUFDMUM7QUFDTyxlQUFlLHdFQUFLLENBQUMsd0RBQVE7QUFDcEM7QUFDTyx3QkFBd0IsZ0hBQW1CO0FBQ2xEO0FBQ0EsY0FBYyx5RUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLFlBQVk7QUFDWixDQUFDOztBQUVEIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZm5nLWNsb25lLz85YTYwIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFBhZ2VzQVBJUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUtbW9kdWxlcy9wYWdlcy1hcGkvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUta2luZFwiO1xuaW1wb3J0IHsgaG9pc3QgfSBmcm9tIFwibmV4dC9kaXN0L2J1aWxkL3RlbXBsYXRlcy9oZWxwZXJzXCI7XG4vLyBJbXBvcnQgdGhlIHVzZXJsYW5kIGNvZGUuXG5pbXBvcnQgKiBhcyB1c2VybGFuZCBmcm9tIFwiLi9wYWdlcy9hcGkvZm5nL2FnZ3JlZ2F0ZS5qc1wiO1xuLy8gUmUtZXhwb3J0IHRoZSBoYW5kbGVyIChzaG91bGQgYmUgdGhlIGRlZmF1bHQgZXhwb3J0KS5cbmV4cG9ydCBkZWZhdWx0IGhvaXN0KHVzZXJsYW5kLCBcImRlZmF1bHRcIik7XG4vLyBSZS1leHBvcnQgY29uZmlnLlxuZXhwb3J0IGNvbnN0IGNvbmZpZyA9IGhvaXN0KHVzZXJsYW5kLCBcImNvbmZpZ1wiKTtcbi8vIENyZWF0ZSBhbmQgZXhwb3J0IHRoZSByb3V0ZSBtb2R1bGUgdGhhdCB3aWxsIGJlIGNvbnN1bWVkLlxuZXhwb3J0IGNvbnN0IHJvdXRlTW9kdWxlID0gbmV3IFBhZ2VzQVBJUm91dGVNb2R1bGUoe1xuICAgIGRlZmluaXRpb246IHtcbiAgICAgICAga2luZDogUm91dGVLaW5kLlBBR0VTX0FQSSxcbiAgICAgICAgcGFnZTogXCIvYXBpL2ZuZy9hZ2dyZWdhdGVcIixcbiAgICAgICAgcGF0aG5hbWU6IFwiL2FwaS9mbmcvYWdncmVnYXRlXCIsXG4gICAgICAgIC8vIFRoZSBmb2xsb3dpbmcgYXJlbid0IHVzZWQgaW4gcHJvZHVjdGlvbi5cbiAgICAgICAgYnVuZGxlUGF0aDogXCJcIixcbiAgICAgICAgZmlsZW5hbWU6IFwiXCJcbiAgICB9LFxuICAgIHVzZXJsYW5kXG59KTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cGFnZXMtYXBpLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Ffng%2Faggregate&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Ffng%2Faggregate.js&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "(api)/./pages/api/fng/aggregate.js":
/*!************************************!*\
  !*** ./pages/api/fng/aggregate.js ***!
  \************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ handler)\n/* harmony export */ });\n// Aggregate Fear & Greed index from multiple sources.\n// Sources: Alternative.me (implemented) + 3 additional sources (stubs) to be defined.\n// Env vars: set API keys/secrets in .env.local; see README and .env.example.\nconst TTL = 5 * 60 * 1000; // 5 minutes cache\nlet cache = {\n    data: null,\n    ts: 0\n};\n// Helper: safe fetch with timeout\nasync function safeFetch(url, options = {}, timeoutMs = 10000) {\n    const controller = new AbortController();\n    const t = setTimeout(()=>controller.abort(), timeoutMs);\n    try {\n        const r = await fetch(url, {\n            ...options,\n            signal: controller.signal\n        });\n        if (!r.ok) throw new Error(`HTTP ${r.status}`);\n        return await r.json();\n    } finally{\n        clearTimeout(t);\n    }\n}\n// Source 1: Alternative.me\nasync function sourceAlternative() {\n    const json = await safeFetch(\"https://api.alternative.me/fng/?limit=1\");\n    const item = json?.data?.[0];\n    if (!item) throw new Error(\"alt.me: empty data\");\n    return {\n        name: \"alternative.me\",\n        value: Number(item.value),\n        raw: item\n    };\n}\n// Source 2: CoinMarketCap Fear & Greed (historical) — use latest value\nasync function sourceTwo() {\n    const key = process.env.CMC_API_KEY;\n    if (!key) return null;\n    const json = await safeFetch(\"https://pro-api.coinmarketcap.com/v3/fear-and-greed/historical\", {\n        headers: {\n            \"X-CMC_PRO_API_KEY\": key,\n            \"Accept\": \"application/json\"\n        }\n    });\n    // Expected shape: { data: [ { value: number|string, timestamp: number, ... }, ... ] }\n    const arr = json?.data;\n    const item = Array.isArray(arr) && arr.length ? arr[arr.length - 1] : null; // latest\n    if (!item || item.value === undefined) throw new Error(\"CMC: empty data\");\n    return {\n        name: \"coinmarketcap\",\n        value: Number(item.value),\n        raw: item\n    };\n}\n// Source 3: Stub (to be defined)\nasync function sourceThree() {\n    // Coinglass Fear & Greed history — use latest\n    const key = process.env.COINGLASS_API_KEY;\n    if (!key) return null;\n    const json = await safeFetch(\"https://open-api-v4.coinglass.com/api/index/fear-greed-history\", {\n        headers: {\n            \"coinglassSecret\": key,\n            \"Accept\": \"application/json\"\n        }\n    });\n    // Expected shape: { data: [ { value: number|string, time: number, ... }, ... ] } or similar\n    const arr = json?.data || json?.result || json?.list;\n    const item = Array.isArray(arr) && arr.length ? arr[arr.length - 1] : null;\n    if (!item) throw new Error(\"Coinglass: empty data\");\n    const val = item.value ?? item.index ?? item.fearGreed ?? item.score;\n    if (val === undefined) throw new Error(\"Coinglass: no value field\");\n    return {\n        name: \"coinglass\",\n        value: Number(val),\n        raw: item\n    };\n}\n// Source 4: Stub (to be defined)\nasync function sourceFour() {\n    // Coinstats Fear and Greed — placeholder until endpoint provided\n    const key = process.env.COINSTATS_API_KEY;\n    if (!key) return null;\n    // TODO: Replace URL and mapping once provided\n    // const json = await safeFetch('https://api.coinstats.app/fear-greed/latest', { headers: { 'Authorization': `Bearer ${key}` } });\n    // const val = json?.data?.value;\n    // return { name: 'coinstats', value: Number(val), raw: json };\n    return null;\n}\nfunction aggregate(values) {\n    const nums = values.map((v)=>v.value).filter((v)=>typeof v === \"number\" && !Number.isNaN(v));\n    if (nums.length === 0) return null;\n    const sum = nums.reduce((a, b)=>a + b, 0);\n    const avg = Math.round(sum / nums.length);\n    return avg;\n}\nasync function handler(req, res) {\n    try {\n        const now = Date.now();\n        if (cache.data && now - cache.ts < TTL) {\n            return res.status(200).json({\n                cached: true,\n                ...cache.data\n            });\n        }\n        const results = await Promise.allSettled([\n            sourceAlternative(),\n            sourceTwo(),\n            sourceThree(),\n            sourceFour()\n        ]);\n        // Build a 4-slot sources array, defaulting undefined to value 0 per spec\n        const slots = results.map((r, idx)=>{\n            if (r.status === \"fulfilled\" && r.value) {\n                return {\n                    name: r.value.name,\n                    value: Number(r.value.value)\n                };\n            }\n            // Default for undefined/missing source\n            return {\n                name: `source${idx + 1}`,\n                value: 0\n            };\n        });\n        // Aggregate across all 4 sources, even if some are zero\n        const sum = slots.reduce((a, b)=>a + (Number.isFinite(b.value) ? b.value : 0), 0);\n        const agg = Math.round(sum / 4);\n        const payload = {\n            source_count: 4,\n            aggregate_value: agg,\n            sources: slots\n        };\n        cache = {\n            data: payload,\n            ts: now\n        };\n        return res.status(200).json({\n            cached: false,\n            ...payload\n        });\n    } catch (err) {\n        console.error(\"aggregate error:\", err);\n        return res.status(500).json({\n            error: \"aggregation_failed\",\n            details: err.message\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFFVyxLQUFLLEVBQUU7Z0JBQ3ZDLE9BQU87b0JBQUVELE1BQU1WLEVBQUVXLEtBQUssQ0FBQ0QsSUFBSTtvQkFBRUMsT0FBT0MsT0FBT1osRUFBRVcsS0FBSyxDQUFDQSxLQUFLO2dCQUFFO1lBQzVEO1lBQ0EsdUNBQXVDO1lBQ3ZDLE9BQU87Z0JBQUVELE1BQU0sQ0FBQyxNQUFNLEVBQUVpRCxNQUFNLEVBQUUsQ0FBQztnQkFBR2hELE9BQU87WUFBRTtRQUMvQztRQUVBLHdEQUF3RDtRQUN4RCxNQUFNK0IsTUFBTWdCLE1BQU1mLE1BQU0sQ0FBQyxDQUFDQyxHQUFHQyxJQUFNRCxJQUFLaEMsQ0FBQUEsT0FBT2dELFFBQVEsQ0FBQ2YsRUFBRWxDLEtBQUssSUFBSWtDLEVBQUVsQyxLQUFLLEdBQUcsSUFBSTtRQUNqRixNQUFNa0QsTUFBTWQsS0FBS0MsS0FBSyxDQUFDTixNQUFNO1FBRTdCLE1BQU1vQixVQUFVO1lBQ2RDLGNBQWM7WUFDZEMsaUJBQWlCSDtZQUNqQkksU0FBU1A7UUFDWDtRQUVBdEUsUUFBUTtZQUFFQyxNQUFNeUU7WUFBU3hFLElBQUk4RDtRQUFJO1FBQ2pDLE9BQU9ELElBQUk5QyxNQUFNLENBQUMsS0FBS0MsSUFBSSxDQUFDO1lBQUVnRCxRQUFRO1lBQU8sR0FBR1EsT0FBTztRQUFDO0lBQzFELEVBQUUsT0FBT0ksS0FBSztRQUNaQyxRQUFRQyxLQUFLLENBQUMsb0JBQW9CRjtRQUNsQyxPQUFPZixJQUFJOUMsTUFBTSxDQUFDLEtBQUtDLElBQUksQ0FBQztZQUFFOEQsT0FBTztZQUFzQkMsU0FBU0gsSUFBSUksT0FBTztRQUFDO0lBQ2xGO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9mbmctY2xvbmUvLi9wYWdlcy9hcGkvZm5nL2FnZ3JlZ2F0ZS5qcz8wZTVmIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIEFnZ3JlZ2F0ZSBGZWFyICYgR3JlZWQgaW5kZXggZnJvbSBtdWx0aXBsZSBzb3VyY2VzLlxuLy8gU291cmNlczogQWx0ZXJuYXRpdmUubWUgKGltcGxlbWVudGVkKSArIDMgYWRkaXRpb25hbCBzb3VyY2VzIChzdHVicykgdG8gYmUgZGVmaW5lZC5cbi8vIEVudiB2YXJzOiBzZXQgQVBJIGtleXMvc2VjcmV0cyBpbiAuZW52LmxvY2FsOyBzZWUgUkVBRE1FIGFuZCAuZW52LmV4YW1wbGUuXG5cbmNvbnN0IFRUTCA9IDUgKiA2MCAqIDEwMDA7IC8vIDUgbWludXRlcyBjYWNoZVxubGV0IGNhY2hlID0geyBkYXRhOiBudWxsLCB0czogMCB9O1xuXG4vLyBIZWxwZXI6IHNhZmUgZmV0Y2ggd2l0aCB0aW1lb3V0XG5hc3luYyBmdW5jdGlvbiBzYWZlRmV0Y2godXJsLCBvcHRpb25zID0ge30sIHRpbWVvdXRNcyA9IDEwMDAwKSB7XG4gIGNvbnN0IGNvbnRyb2xsZXIgPSBuZXcgQWJvcnRDb250cm9sbGVyKCk7XG4gIGNvbnN0IHQgPSBzZXRUaW1lb3V0KCgpID0+IGNvbnRyb2xsZXIuYWJvcnQoKSwgdGltZW91dE1zKTtcbiAgdHJ5IHtcbiAgICBjb25zdCByID0gYXdhaXQgZmV0Y2godXJsLCB7IC4uLm9wdGlvbnMsIHNpZ25hbDogY29udHJvbGxlci5zaWduYWwgfSk7XG4gICAgaWYgKCFyLm9rKSB0aHJvdyBuZXcgRXJyb3IoYEhUVFAgJHtyLnN0YXR1c31gKTtcbiAgICByZXR1cm4gYXdhaXQgci5qc29uKCk7XG4gIH0gZmluYWxseSB7XG4gICAgY2xlYXJUaW1lb3V0KHQpO1xuICB9XG59XG5cbi8vIFNvdXJjZSAxOiBBbHRlcm5hdGl2ZS5tZVxuYXN5bmMgZnVuY3Rpb24gc291cmNlQWx0ZXJuYXRpdmUoKSB7XG4gIGNvbnN0IGpzb24gPSBhd2FpdCBzYWZlRmV0Y2goJ2h0dHBzOi8vYXBpLmFsdGVybmF0aXZlLm1lL2ZuZy8/bGltaXQ9MScpO1xuICBjb25zdCBpdGVtID0ganNvbj8uZGF0YT8uWzBdO1xuICBpZiAoIWl0ZW0pIHRocm93IG5ldyBFcnJvcignYWx0Lm1lOiBlbXB0eSBkYXRhJyk7XG4gIHJldHVybiB7XG4gICAgbmFtZTogJ2FsdGVybmF0aXZlLm1lJyxcbiAgICB2YWx1ZTogTnVtYmVyKGl0ZW0udmFsdWUpLFxuICAgIHJhdzogaXRlbSxcbiAgfTtcbn1cblxuLy8gU291cmNlIDI6IENvaW5NYXJrZXRDYXAgRmVhciAmIEdyZWVkIChoaXN0b3JpY2FsKSDigJQgdXNlIGxhdGVzdCB2YWx1ZVxuYXN5bmMgZnVuY3Rpb24gc291cmNlVHdvKCkge1xuICBjb25zdCBrZXkgPSBwcm9jZXNzLmVudi5DTUNfQVBJX0tFWTtcbiAgaWYgKCFrZXkpIHJldHVybiBudWxsO1xuICBjb25zdCBqc29uID0gYXdhaXQgc2FmZUZldGNoKCdodHRwczovL3Byby1hcGkuY29pbm1hcmtldGNhcC5jb20vdjMvZmVhci1hbmQtZ3JlZWQvaGlzdG9yaWNhbCcsIHtcbiAgICBoZWFkZXJzOiB7XG4gICAgICAnWC1DTUNfUFJPX0FQSV9LRVknOiBrZXksXG4gICAgICAnQWNjZXB0JzogJ2FwcGxpY2F0aW9uL2pzb24nXG4gICAgfVxuICB9KTtcbiAgLy8gRXhwZWN0ZWQgc2hhcGU6IHsgZGF0YTogWyB7IHZhbHVlOiBudW1iZXJ8c3RyaW5nLCB0aW1lc3RhbXA6IG51bWJlciwgLi4uIH0sIC4uLiBdIH1cbiAgY29uc3QgYXJyID0ganNvbj8uZGF0YTtcbiAgY29uc3QgaXRlbSA9IEFycmF5LmlzQXJyYXkoYXJyKSAmJiBhcnIubGVuZ3RoID8gYXJyW2Fyci5sZW5ndGggLSAxXSA6IG51bGw7IC8vIGxhdGVzdFxuICBpZiAoIWl0ZW0gfHwgaXRlbS52YWx1ZSA9PT0gdW5kZWZpbmVkKSB0aHJvdyBuZXcgRXJyb3IoJ0NNQzogZW1wdHkgZGF0YScpO1xuICByZXR1cm4ge1xuICAgIG5hbWU6ICdjb2lubWFya2V0Y2FwJyxcbiAgICB2YWx1ZTogTnVtYmVyKGl0ZW0udmFsdWUpLFxuICAgIHJhdzogaXRlbSxcbiAgfTtcbn1cblxuLy8gU291cmNlIDM6IFN0dWIgKHRvIGJlIGRlZmluZWQpXG5hc3luYyBmdW5jdGlvbiBzb3VyY2VUaHJlZSgpIHtcbiAgLy8gQ29pbmdsYXNzIEZlYXIgJiBHcmVlZCBoaXN0b3J5IOKAlCB1c2UgbGF0ZXN0XG4gIGNvbnN0IGtleSA9IHByb2Nlc3MuZW52LkNPSU5HTEFTU19BUElfS0VZO1xuICBpZiAoIWtleSkgcmV0dXJuIG51bGw7XG4gIGNvbnN0IGpzb24gPSBhd2FpdCBzYWZlRmV0Y2goJ2h0dHBzOi8vb3Blbi1hcGktdjQuY29pbmdsYXNzLmNvbS9hcGkvaW5kZXgvZmVhci1ncmVlZC1oaXN0b3J5Jywge1xuICAgIGhlYWRlcnM6IHtcbiAgICAgICdjb2luZ2xhc3NTZWNyZXQnOiBrZXksXG4gICAgICAnQWNjZXB0JzogJ2FwcGxpY2F0aW9uL2pzb24nXG4gICAgfVxuICB9KTtcbiAgLy8gRXhwZWN0ZWQgc2hhcGU6IHsgZGF0YTogWyB7IHZhbHVlOiBudW1iZXJ8c3RyaW5nLCB0aW1lOiBudW1iZXIsIC4uLiB9LCAuLi4gXSB9IG9yIHNpbWlsYXJcbiAgY29uc3QgYXJyID0ganNvbj8uZGF0YSB8fCBqc29uPy5yZXN1bHQgfHwganNvbj8ubGlzdDtcbiAgY29uc3QgaXRlbSA9IEFycmF5LmlzQXJyYXkoYXJyKSAmJiBhcnIubGVuZ3RoID8gYXJyW2Fyci5sZW5ndGggLSAxXSA6IG51bGw7XG4gIGlmICghaXRlbSkgdGhyb3cgbmV3IEVycm9yKCdDb2luZ2xhc3M6IGVtcHR5IGRhdGEnKTtcbiAgY29uc3QgdmFsID0gaXRlbS52YWx1ZSA/PyBpdGVtLmluZGV4ID8/IGl0ZW0uZmVhckdyZWVkID8/IGl0ZW0uc2NvcmU7XG4gIGlmICh2YWwgPT09IHVuZGVmaW5lZCkgdGhyb3cgbmV3IEVycm9yKCdDb2luZ2xhc3M6IG5vIHZhbHVlIGZpZWxkJyk7XG4gIHJldHVybiB7XG4gICAgbmFtZTogJ2NvaW5nbGFzcycsXG4gICAgdmFsdWU6IE51bWJlcih2YWwpLFxuICAgIHJhdzogaXRlbSxcbiAgfTtcbn1cblxuLy8gU291cmNlIDQ6IFN0dWIgKHRvIGJlIGRlZmluZWQpXG5hc3luYyBmdW5jdGlvbiBzb3VyY2VGb3VyKCkge1xuICAvLyBDb2luc3RhdHMgRmVhciBhbmQgR3JlZWQg4oCUIHBsYWNlaG9sZGVyIHVudGlsIGVuZHBvaW50IHByb3ZpZGVkXG4gIGNvbnN0IGtleSA9IHByb2Nlc3MuZW52LkNPSU5TVEFUU19BUElfS0VZO1xuICBpZiAoIWtleSkgcmV0dXJuIG51bGw7XG4gIC8vIFRPRE86IFJlcGxhY2UgVVJMIGFuZCBtYXBwaW5nIG9uY2UgcHJvdmlkZWRcbiAgLy8gY29uc3QganNvbiA9IGF3YWl0IHNhZmVGZXRjaCgnaHR0cHM6Ly9hcGkuY29pbnN0YXRzLmFwcC9mZWFyLWdyZWVkL2xhdGVzdCcsIHsgaGVhZGVyczogeyAnQXV0aG9yaXphdGlvbic6IGBCZWFyZXIgJHtrZXl9YCB9IH0pO1xuICAvLyBjb25zdCB2YWwgPSBqc29uPy5kYXRhPy52YWx1ZTtcbiAgLy8gcmV0dXJuIHsgbmFtZTogJ2NvaW5zdGF0cycsIHZhbHVlOiBOdW1iZXIodmFsKSwgcmF3OiBqc29uIH07XG4gIHJldHVybiBudWxsO1xufVxuXG5mdW5jdGlvbiBhZ2dyZWdhdGUodmFsdWVzKSB7XG4gIGNvbnN0IG51bXMgPSB2YWx1ZXMubWFwKHYgPT4gdi52YWx1ZSkuZmlsdGVyKHYgPT4gdHlwZW9mIHYgPT09ICdudW1iZXInICYmICFOdW1iZXIuaXNOYU4odikpO1xuICBpZiAobnVtcy5sZW5ndGggPT09IDApIHJldHVybiBudWxsO1xuICBjb25zdCBzdW0gPSBudW1zLnJlZHVjZSgoYSwgYikgPT4gYSArIGIsIDApO1xuICBjb25zdCBhdmcgPSBNYXRoLnJvdW5kKHN1bSAvIG51bXMubGVuZ3RoKTtcbiAgcmV0dXJuIGF2Zztcbn1cblxuZXhwb3J0IGRlZmF1bHQgYXN5bmMgZnVuY3Rpb24gaGFuZGxlcihyZXEsIHJlcykge1xuICB0cnkge1xuICAgIGNvbnN0IG5vdyA9IERhdGUubm93KCk7XG4gICAgaWYgKGNhY2hlLmRhdGEgJiYgbm93IC0gY2FjaGUudHMgPCBUVEwpIHtcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDIwMCkuanNvbih7IGNhY2hlZDogdHJ1ZSwgLi4uY2FjaGUuZGF0YSB9KTtcbiAgICB9XG5cbiAgICBjb25zdCByZXN1bHRzID0gYXdhaXQgUHJvbWlzZS5hbGxTZXR0bGVkKFtcbiAgICAgIHNvdXJjZUFsdGVybmF0aXZlKCksXG4gICAgICBzb3VyY2VUd28oKSxcbiAgICAgIHNvdXJjZVRocmVlKCksXG4gICAgICBzb3VyY2VGb3VyKCksXG4gICAgXSk7XG5cbiAgICAvLyBCdWlsZCBhIDQtc2xvdCBzb3VyY2VzIGFycmF5LCBkZWZhdWx0aW5nIHVuZGVmaW5lZCB0byB2YWx1ZSAwIHBlciBzcGVjXG4gICAgY29uc3Qgc2xvdHMgPSByZXN1bHRzLm1hcCgociwgaWR4KSA9PiB7XG4gICAgICBpZiAoci5zdGF0dXMgPT09ICdmdWxmaWxsZWQnICYmIHIudmFsdWUpIHtcbiAgICAgICAgcmV0dXJuIHsgbmFtZTogci52YWx1ZS5uYW1lLCB2YWx1ZTogTnVtYmVyKHIudmFsdWUudmFsdWUpIH07XG4gICAgICB9XG4gICAgICAvLyBEZWZhdWx0IGZvciB1bmRlZmluZWQvbWlzc2luZyBzb3VyY2VcbiAgICAgIHJldHVybiB7IG5hbWU6IGBzb3VyY2Uke2lkeCArIDF9YCAsIHZhbHVlOiAwIH07XG4gICAgfSk7XG5cbiAgICAvLyBBZ2dyZWdhdGUgYWNyb3NzIGFsbCA0IHNvdXJjZXMsIGV2ZW4gaWYgc29tZSBhcmUgemVyb1xuICAgIGNvbnN0IHN1bSA9IHNsb3RzLnJlZHVjZSgoYSwgYikgPT4gYSArIChOdW1iZXIuaXNGaW5pdGUoYi52YWx1ZSkgPyBiLnZhbHVlIDogMCksIDApO1xuICAgIGNvbnN0IGFnZyA9IE1hdGgucm91bmQoc3VtIC8gNCk7XG5cbiAgICBjb25zdCBwYXlsb2FkID0ge1xuICAgICAgc291cmNlX2NvdW50OiA0LFxuICAgICAgYWdncmVnYXRlX3ZhbHVlOiBhZ2csXG4gICAgICBzb3VyY2VzOiBzbG90cyxcbiAgICB9O1xuXG4gICAgY2FjaGUgPSB7IGRhdGE6IHBheWxvYWQsIHRzOiBub3cgfTtcbiAgICByZXR1cm4gcmVzLnN0YXR1cygyMDApLmpzb24oeyBjYWNoZWQ6IGZhbHNlLCAuLi5wYXlsb2FkIH0pO1xuICB9IGNhdGNoIChlcnIpIHtcbiAgICBjb25zb2xlLmVycm9yKCdhZ2dyZWdhdGUgZXJyb3I6JywgZXJyKTtcbiAgICByZXR1cm4gcmVzLnN0YXR1cyg1MDApLmpzb24oeyBlcnJvcjogJ2FnZ3JlZ2F0aW9uX2ZhaWxlZCcsIGRldGFpbHM6IGVyci5tZXNzYWdlIH0pO1xuICB9XG59XG4iXSwibmFtZXMiOlsiVFRMIiwiY2FjaGUiLCJkYXRhIiwidHMiLCJzYWZlRmV0Y2giLCJ1cmwiLCJvcHRpb25zIiwidGltZW91dE1zIiwiY29udHJvbGxlciIsIkFib3J0Q29udHJvbGxlciIsInQiLCJzZXRUaW1lb3V0IiwiYWJvcnQiLCJyIiwiZmV0Y2giLCJzaWduYWwiLCJvayIsIkVycm9yIiwic3RhdHVzIiwianNvbiIsImNsZWFyVGltZW91dCIsInNvdXJjZUFsdGVybmF0aXZlIiwiaXRlbSIsIm5hbWUiLCJ2YWx1ZSIsIk51bWJlciIsInJhdyIsInNvdXJjZVR3byIsImtleSIsInByb2Nlc3MiLCJlbnYiLCJDTUNfQVBJX0tFWSIsImhlYWRlcnMiLCJhcnIiLCJBcnJheSIsImlzQXJyYXkiLCJsZW5ndGgiLCJ1bmRlZmluZWQiLCJzb3VyY2VUaHJlZSIsIkNPSU5HTEFTU19BUElfS0VZIiwicmVzdWx0IiwibGlzdCIsInZhbCIsImluZGV4IiwiZmVhckdyZWVkIiwic2NvcmUiLCJzb3VyY2VGb3VyIiwiQ09JTlNUQVRTX0FQSV9LRVkiLCJhZ2dyZWdhdGUiLCJ2YWx1ZXMiLCJudW1zIiwibWFwIiwidiIsImZpbHRlciIsImlzTmFOIiwic3VtIiwicmVkdWNlIiwiYSIsImIiLCJhdmciLCJNYXRoIiwicm91bmQiLCJoYW5kbGVyIiwicmVxIiwicmVzIiwibm93IiwiRGF0ZSIsImNhY2hlZCIsInJlc3VsdHMiLCJQcm9taXNlIiwiYWxsU2V0dGxlZCIsInNsb3RzIiwiaWR4IiwiaXNGaW5pdGUiLCJhZ2ciLCJwYXlsb2FkIiwic291cmNlX2NvdW50IiwiYWdncmVnYXRlX3ZhbHVlIiwic291cmNlcyIsImVyciIsImNvbnNvbGUiLCJlcnJvciIsImRldGFpbHMiLCJtZXNzYWdlIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./pages/api/fng/aggregate.js\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Ffng%2Faggregate&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Ffng%2Faggregate.js&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();